<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Pesan Testimoni (AI)</title>
    
    <!-- Impor Font dan Ikon -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --primary-color-start: #667eea;
            --primary-color-end: #764ba2;
            --secondary-color: #f0f2f5;
            --text-color: #2c3e50;
            --label-color: #576b81;
            --border-color: #dce4f0;
            --white-color: #ffffff;
            --success-color: #2ecc71;
            --success-gradient: linear-gradient(135deg, #2ecc71 0%, #28b463 100%);
            --error-color: #e74c3c;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--secondary-color);
            background-image: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--white-color);
            padding: 35px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 550px;
            text-align: center;
            animation: fadeIn 0.6s ease-out;
        }

        h1 {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 1.8em;
            font-weight: 700;
        }
        
        h1 .ai-badge {
            font-size: 0.5em;
            font-weight: 600;
            background: var(--primary-gradient);
            color: var(--white-color);
            padding: 4px 8px;
            border-radius: 8px;
            vertical-align: middle;
            margin-left: 8px;
        }

        .input-group {
            margin-bottom: 22px;
            position: relative;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--label-color);
            font-size: 0.9em;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper i.fa-solid {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #bdc3c7;
            font-size: 1.1em;
            z-index: 1;
            transition: color 0.3s;
        }
        
        .input-wrapper.select-wrapper::after {
            content: '\f078';
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #bdc3c7;
            pointer-events: none;
        }

        input[type="text"], select, textarea {
            width: 100%;
            padding: 14px 20px 14px 50px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            box-sizing: border-box;
            font-size: 1em;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease-in-out;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #fdfdfd;
        }
        
        input[type="text"]:focus, select:focus, textarea:focus {
            border-color: var(--primary-color-start);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            outline: none;
            background-color: var(--white-color);
        }

        input[type="text"]:focus ~ i, select:focus ~ i {
             color: var(--primary-color-start);
        }
        
        textarea {
            height: 250px;
            resize: vertical;
            padding: 15px 20px;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.05em;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        button:active:not(:disabled) {
            transform: translateY(-1px);
        }

        #generateBtn {
            background: var(--primary-gradient);
            color: var(--white-color);
        }

        #copyBtn {
            background-color: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
        }

        #copyBtn:hover:not(:disabled) {
             border-color: #dce1e6;
        }
        
        button:disabled {
            background-color: #f8f9fa;
            color: #adb5bd;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }
        
        #copyBtn.copied {
            background: var(--success-gradient);
            color: var(--white-color);
            border-color: transparent;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #95a5a6;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Generator Pesan<span class="ai-badge">AI</span></h1>
        
        <div class="input-group">
            <label for="namaPembeli">Nama Pembeli</label>
            <div class="input-wrapper">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="namaPembeli" placeholder="Contoh: Kak Maria">
            </div>
        </div>
        
        <div class="input-group">
            <label for="namaProduk">Pilih Produk</label>
            <div class="input-wrapper select-wrapper">
                <i class="fa-solid fa-box-open"></i>
                <select id="namaProduk">
                    <option value="Buku Tulis Custem">Buku Tulis Custem</option>
                    <option value="Fotopolaroid ukuran 6x9">Fotopolaroid ukuran 6x9</option>
                </select>
            </div>
        </div>
        
        <div class="button-group">
            <button id="generateBtn"><i class="fa-solid fa-wand-magic-sparkles"></i> Buat Pesan</button>
            <button id="copyBtn" disabled><i class="fa-solid fa-copy"></i> Salin Pesan</button>
        </div>
        
        <div class="input-group" style="margin-top: 25px;">
            <label for="hasilPesan">Hasil Pesan (Format WhatsApp)</label>
            <textarea id="hasilPesan" readonly placeholder="Hasil pesan dari AI akan muncul di sini..."></textarea>
        </div>

        <div class="footer">
            Dibuat untuk CR-Kreatif Nabire
        </div>
    </div>

    <script>
        const namaPembeliInput = document.getElementById('namaPembeli');
        const namaProdukInput = document.getElementById('namaProduk');
        const generateBtn = document.getElementById('generateBtn');
        const copyBtn = document.getElementById('copyBtn');
        const hasilTextarea = document.getElementById('hasilPesan');

        async function generateMessage() {
            const namaPembeli = namaPembeliInput.value;
            const namaProduk = namaProdukInput.value;

            if (namaPembeli.trim() === '') {
                hasilTextarea.value = "Harap isi Nama Pembeli terlebih dahulu.";
                return;
            }

            // --- UI Loading State ---
            generateBtn.disabled = true;
            copyBtn.disabled = true;
            const originalBtnText = generateBtn.innerHTML;
            generateBtn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> Membuat...`;
            hasilTextarea.value = "AI sedang merangkai kata-kata terbaik untuk Anda...";
            
            // --- AI Prompting ---
            const prompt = `Anda adalah asisten pemasaran yang ramah untuk "CR- Kreatif Nabire", sebuah usaha percetakan lokal di Nabire, Papua. Tugas Anda adalah membuat sebuah pesan WhatsApp yang hangat dan personal untuk meminta testimoni dari pelanggan.

            Informasi Pelanggan:
            - Nama Pelanggan: ${namaPembeli}
            - Produk yang dibeli: ${namaProduk}

            Instruksi:
            1.  Sapa pelanggan dengan namanya.
            2.  Sebutkan nama brand "CR- Kreatif Nabire" dan produk yang dibeli.
            3.  Gunakan gaya bahasa yang tulus, bersahabat, dan tidak kaku.
            4.  Tekankan bahwa ulasan mereka sangat berarti dan bisa membantu orang lain di Nabire menemukan tempat cetak yang bagus.
            5.  Minta izin untuk menampilkan testimoni mereka.
            6.  Gunakan format tebal WhatsApp (tanda bintang *) pada nama pelanggan, nama brand, nama produk, dan lokasi (Nabire).
            7.  Akhiri dengan ucapan terima kasih dan emoji yang sesuai.
            8.  Hanya berikan teks pesannya saja, tanpa kalimat pembuka atau penutup tambahan dari Anda.`;

            try {
                // --- Gemini API Call ---
                const apiKey = ""; // Dibiarkan kosong sesuai instruksi
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: prompt }]
                    }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    hasilTextarea.value = generatedText.trim();
                    copyBtn.disabled = false;
                } else {
                    throw new Error("Respons dari AI tidak valid.");
                }

            } catch (error) {
                console.error("Error:", error);
                hasilTextarea.value = "Maaf, terjadi kesalahan saat membuat pesan. Silakan coba lagi beberapa saat.";
            } finally {
                // --- Reset UI State ---
                generateBtn.disabled = false;
                generateBtn.innerHTML = originalBtnText;
            }
        }

        function copyMessage() {
            hasilTextarea.select();
            hasilTextarea.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            const originalCopyBtnText = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fa-solid fa-check"></i> Tersalin!';
            copyBtn.classList.add('copied');

            setTimeout(() => {
                copyBtn.innerHTML = originalCopyBtnText;
                copyBtn.classList.remove('copied');
            }, 2000);
        }

        generateBtn.addEventListener('click', generateMessage);
        copyBtn.addEventListener('click', copyMessage);
    </script>

</body>
</html>
